<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Share Your Story</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@500;600;700;800;900&family=Baloo+2:wght@700;800&display=swap" rel="stylesheet">
  <style>
    :root{
      --bg:#f4f7fb; --card:#ffffff; --muted:#e7edf5;
      --text:#205b7a; --sub:#3d738d; --accent:#4fb3ff; --border:#0a2c45;
      --ok:#2fbf71; --bad:#e15757;
    }
    *, *::before, *::after{box-sizing:border-box}
    html,body{height:100%;margin:0;font-family:'Baloo 2', Inter, system-ui, Arial;color:var(--text);
      /* Add a soft overlay to keep text readable on all screens */
      background-image: linear-gradient(rgba(244,247,251,0.92), rgba(244,247,251,0.92)), url('105.jpg');
      background-size:cover;background-position:center;background-repeat:no-repeat;
    }
    .wrap{max-width:980px;margin:0 auto;padding:clamp(12px,3vw,24px)}
    header{display:flex;align-items:center;justify-content:flex-start;margin:8px 0 16px}
    .title{font-weight:900;letter-spacing:-0.02em;font-size:clamp(22px,4vw,34px)}
    .sub{color:var(--sub);font-weight:700;font-size:clamp(13px,2.2vw,16px)}
    .card{background:linear-gradient(180deg,#ffffff,#f6fbff);border:1px solid var(--border);border-radius:16px;padding:clamp(16px,3vw,24px);box-shadow:0 30px 100px rgba(23,43,77,.08);}
    .row{display:flex;flex-direction:column;gap:8px;margin-bottom:14px}
    label{font-weight:800;font-size:clamp(14px,2vw,16px)}
    textarea,input{width:100%;background:#ffffff;border:1px solid var(--border);color:var(--text);border-radius:10px;padding:12px;font-size:clamp(14px,2.2vw,16px)}
    textarea{min-height:clamp(160px,30vh,260px)}
    .note{font-size:clamp(12px,1.8vw,13px);color:var(--sub)}
    .actions{display:flex;gap:8px;flex-wrap:wrap}
    .btn{appearance:none;border:none;border-radius:10px;padding:12px 16px;font-weight:800;color:#ffffff;background:var(--accent);cursor:pointer;font-size:clamp(14px,2.4vw,16px)}
    .btn.secondary{background:var(--muted);color:var(--text);border:1px solid var(--border)}
    .result{white-space:pre-wrap;background:#ffffff;border:1px dashed var(--border);padding:12px;border-radius:10px;font-size:clamp(14px,2.2vw,16px)}
    .disabled{opacity:.6;pointer-events:none}

    /* Small screens: stack actions, full-width buttons */
    @media (max-width: 480px){
      .actions{flex-direction:column}
      .btn{width:100%}
      .card{border-radius:12px}
    }

    /* Medium screens: comfortable reading width */
    @media (min-width: 768px){
      .wrap{max-width:860px}
    }
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <div>
          <div class="title" id="titleText">Share A Story</div>
          <div class="sub" id="subText">One story at a time. Once you've submitted- there's no going back, so please be careful!</div>
      </div>
    </header>

    <div class="card">
      <div class="row">
        <label for="story" id="storyLabel">Tell a funny story about your life… (the funnier the better)</label>
        <textarea id="story" placeholder="Tell a funny story about your life." autocomplete="off"></textarea>
      </div>
      <div class="row">
          <label for="name" id="nameLabel">Submit your name…</label>
          <input id="name" type="text" placeholder="Submit your name..." autocomplete="off" />
      </div>
      <div class="actions" style="margin-top:12px">
          <button id="submitBtn" class="btn">Submit</button>
      </div>
    </div>
    
  </div>

  <script>
    // Language mode shared with game page
    let ruMode = true;
    function lang(en, ru){ return ruMode ? ru : en; }
    try{
      const raw = localStorage.getItem('twRuMode');
      if(raw){ const obj = JSON.parse(raw); if(typeof obj.ruMode === 'boolean') ruMode = obj.ruMode; }
    }catch(e){}
    const titleText = document.getElementById('titleText');
    const subText = document.getElementById('subText');
    const storyLabel = document.getElementById('storyLabel');
    const nameLabel = document.getElementById('nameLabel');
    const submitBtn = document.getElementById('submitBtn');
    function updateLanguageUI(){
      // Instructions and labels shown in both languages
      titleText.textContent = 'Share A Story / Поделитесь историей';
      subText.textContent = "One story at a time. Once you've submitted- there's no going back, so please be careful! / Пожалуйста, отправляйте одну историю за раз. После отправки вернуться нельзя, будьте осторожны!";
      storyLabel.textContent = 'Tell a funny story about your life… (the funnier the better) / Расскажите забавную историю из вашей жизни (чем смешнее, тем лучше)';
      nameLabel.textContent = 'Submit your name… / Укажите своё имя';
      // Buttons remain single-language via ruMode
      submitBtn.textContent = lang('Submit','Отправить');
    }
    updateLanguageUI();
    const storyEl = document.getElementById('story');
    const nameEl = document.getElementById('name');

    // No per-person lock: allow repeated submissions

    submitBtn.addEventListener('click', async ()=>{
      if(submitBtn.classList.contains('disabled')) return;
      const story = storyEl.value.trim();
      const name = nameEl.value.trim();
      if(!story){ alert('Please enter your story.'); return; }
      if(!name){ alert('Please enter your name.'); return; }
      submitBtn.textContent = 'Saving…'; submitBtn.classList.add('disabled');
      // Append to local aggregated text store (client-only, raw inputs)
      const line = `${story}||${name}\n`;
      try{
        const prev = localStorage.getItem('twSubmissionsText') || '';
        localStorage.setItem('twSubmissionsText', prev + line);
      }catch(e){}
      // Clear inputs immediately after successful submission
      storyEl.value = '';
      nameEl.value = '';
      submitBtn.textContent = 'Submit';
      submitBtn.classList.remove('disabled');
      alert('Your story has been submitted.');
    });

    // Clear inputs when leaving/closing the page and when returning via bfcache
    function clearInputs(){ try{ storyEl.value=''; nameEl.value=''; }catch(e){} }
    window.addEventListener('pagehide', clearInputs);
    document.addEventListener('visibilitychange', ()=>{ if(document.visibilityState === 'hidden') clearInputs(); });
    window.addEventListener('pageshow', clearInputs);
  </script>
</body>
</html>
